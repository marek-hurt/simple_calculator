<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Simpe Calculator in C: src/watchdog.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Simpe Calculator in C
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('watchdog_8h.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">watchdog.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Software Watchdog Timer with timeout callback and system tick.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
</div>
<p><a href="watchdog_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-typedef-members" class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a6a9c567c16b93f0de3b3ee88a6635b12" id="r_a6a9c567c16b93f0de3b3ee88a6635b12"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6a9c567c16b93f0de3b3ee88a6635b12">watchdog_callback_t</a>) (void)</td></tr>
<tr class="memdesc:a6a9c567c16b93f0de3b3ee88a6635b12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function pointer type for the watchdog timeout callback.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aed287366e98b8ca988cb2329f7217a77" id="r_aed287366e98b8ca988cb2329f7217a77"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aed287366e98b8ca988cb2329f7217a77">watchdog_init</a> (uint32_t timeout, <a class="el" href="#a6a9c567c16b93f0de3b3ee88a6635b12">watchdog_callback_t</a> callback)</td></tr>
<tr class="memdesc:aed287366e98b8ca988cb2329f7217a77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the software watchdog.  <br /></td></tr>
<tr class="memitem:a5638303bd176a87c7722e1b9fba03e10" id="r_a5638303bd176a87c7722e1b9fba03e10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5638303bd176a87c7722e1b9fba03e10">watchdog_kick</a> (void)</td></tr>
<tr class="memdesc:a5638303bd176a87c7722e1b9fba03e10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the watchdog timer.  <br /></td></tr>
<tr class="memitem:a2693f882c9b6a54ec28cc1b28f080c6d" id="r_a2693f882c9b6a54ec28cc1b28f080c6d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2693f882c9b6a54ec28cc1b28f080c6d">watchdog_tick</a> (uint32_t elapsed_ms)</td></tr>
<tr class="memdesc:a2693f882c9b6a54ec28cc1b28f080c6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simulates the passage of time and checks for timeout.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Software Watchdog Timer with timeout callback and system tick. </p>

<p class="definition">Definition in file <a class="el" href="watchdog_8h_source.html">watchdog.h</a>.</p>
</div><a name="doc-typedef-members" id="doc-typedef-members"></a><h2 id="header-doc-typedef-members" class="groupheader">Typedef Documentation</h2>
<a id="a6a9c567c16b93f0de3b3ee88a6635b12" name="a6a9c567c16b93f0de3b3ee88a6635b12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a9c567c16b93f0de3b3ee88a6635b12">&#9670;&#160;</a></span>watchdog_callback_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* watchdog_callback_t) (void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function pointer type for the watchdog timeout callback. </p>

<p class="definition">Definition at line <a class="el" href="watchdog_8h_source.html#l00015">15</a> of file <a class="el" href="watchdog_8h_source.html">watchdog.h</a>.</p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="aed287366e98b8ca988cb2329f7217a77" name="aed287366e98b8ca988cb2329f7217a77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed287366e98b8ca988cb2329f7217a77">&#9670;&#160;</a></span>watchdog_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watchdog_init </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>timeout</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#a6a9c567c16b93f0de3b3ee88a6635b12">watchdog_callback_t</a></td>          <td class="paramname"><span class="paramname"><em>callback</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the software watchdog. </p>
<p>This function sets the timeout value and registers a callback function that will be called when the timeout is reached unless the watchdog is reset.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>Timeout value in milliseconds. </td></tr>
    <tr><td class="paramname">callback</td><td>Function to be called when the watchdog expires. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="watchdog_8c_source.html#l00028">28</a> of file <a class="el" href="watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   28</span>                                                                   {</div>
<div class="line"><span class="lineno">   29</span>    s_timeout_ms = timeout;</div>
<div class="line"><span class="lineno">   30</span>    s_elapsed_ms = 0;</div>
<div class="line"><span class="lineno">   31</span>    s_callback = callback;</div>
<div class="line"><span class="lineno">   32</span>    s_triggered = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   33</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5638303bd176a87c7722e1b9fba03e10" name="a5638303bd176a87c7722e1b9fba03e10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5638303bd176a87c7722e1b9fba03e10">&#9670;&#160;</a></span>watchdog_kick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watchdog_kick </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets the watchdog timer. </p>
<p>This function resets the internal elapsed time counter. If the watchdog has already expired, it also clears the triggered flag. </p>

<p class="definition">Definition at line <a class="el" href="watchdog_8c_source.html#l00035">35</a> of file <a class="el" href="watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   35</span>                         {</div>
<div class="line"><span class="lineno">   36</span>    s_elapsed_ms = 0;</div>
<div class="line"><span class="lineno">   37</span>    s_triggered = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   38</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2693f882c9b6a54ec28cc1b28f080c6d" name="a2693f882c9b6a54ec28cc1b28f080c6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2693f882c9b6a54ec28cc1b28f080c6d">&#9670;&#160;</a></span>watchdog_tick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void watchdog_tick </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>elapsed_ms</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Simulates the passage of time and checks for timeout. </p>
<p>Call this function periodically with the elapsed time since the last call to simulate system tick updates. If the elapsed time exceeds the timeout, the registered callback will be invoked (only once).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">elapsed_ms</td><td>Elapsed time in milliseconds. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="watchdog_8c_source.html#l00040">40</a> of file <a class="el" href="watchdog_8c_source.html">watchdog.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   40</span>                                        {</div>
<div class="line"><span class="lineno">   41</span>    <span class="keywordflow">if</span> (s_triggered) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   42</span> </div>
<div class="line"><span class="lineno">   43</span>    s_elapsed_ms += elapsed_ms;</div>
<div class="line"><span class="lineno">   44</span> </div>
<div class="line"><span class="lineno">   45</span>    <span class="keywordflow">if</span> (s_elapsed_ms &gt;= s_timeout_ms) {</div>
<div class="line"><span class="lineno">   46</span>        s_triggered = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   47</span>        <span class="keywordflow">if</span> (s_callback) {</div>
<div class="line"><span class="lineno">   48</span>            s_callback();</div>
<div class="line"><span class="lineno">   49</span>        }</div>
<div class="line"><span class="lineno">   50</span>    }</div>
<div class="line"><span class="lineno">   51</span>}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a href="watchdog_8h.html">watchdog.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
